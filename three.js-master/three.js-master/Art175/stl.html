
<!DOCTYPE html>
<html lang="en">

<title>AR on the web for SJSU</title>
<meta charset="utf-8">

<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

<!-- import the three.js library --> <!-- import the three.js library -->
<script src='./js/three.min.js'></script>
<script src="./js/stats.min.js"></script>




<!-- sets the local directory (the code '../' navigates up one directory from exmples to three.js) -->


<body style='margin : 0px; overflow: hidden; font-family: Monospace;'>

    <!-- imports libraries to import fbx animations -->
    <script src="./js/three.js"></script>
    
    <script src="./js/STLLoader.js"></script>

  

    <script src="js/controls/OrbitControls.js"></script>

    <script src="./js/Detector.js"></script>
    <!--ALREADY IMPORTED-- <script src="js/libs/stats.min.js"></script> -->
    
    <script>
        
        if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
        
        var clock = new THREE.Clock();
        var mixers = [];
        var stats;
    
        
	///////////////////////////////////////////////////////////////////////////////////
	//		Init
    //      sets up how the webpage will be diplayed (fullscreen)
	//////////////////////////////////////////////////////////////////////////////////
        // init renderer
        var renderer	= new THREE.WebGLRenderer({
            // antialias	: true,
            alpha: true
        });
        renderer.setClearColor(new THREE.Color('lightgrey'), 0)
        // renderer.setPixelRatio( 1/2 );
        renderer.setSize( window.innerWidth, window.innerHeight );
        renderer.domElement.style.position = 'absolute'
        renderer.domElement.style.top = '0px'
        renderer.domElement.style.left = '0px'
        document.body.appendChild( renderer.domElement );
        // array of functions for the rendering loop
        var onRenderFcts= [];
        // init scene and camera
        var scene	= new THREE.Scene();
        
        light = new THREE.HemisphereLight( 0xffffff, 0x444444 );
        light.position.set( 0, 200, 0 );
        scene.add( light );
        light = new THREE.DirectionalLight( 0xffffff );
        light.position.set( 0, 200, 100 );
        light.castShadow = true;
        light.shadow.camera.top = 180;
        light.shadow.camera.bottom = -100;
        light.shadow.camera.left = -120;
        light.shadow.camera.right = 120;
        scene.add( light );
        
        //////////FROM FBX IMPORT
        container = document.createElement( 'div' );
        document.body.appendChild( container );
        //////////////////////////////////////////////////////////////////////////////////
        //		Initialize a basic camera
        //////////////////////////////////////////////////////////////////////////////////
        //      Create a camera
        camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
        scene.add(camera);
       
       
        //		add objects in the scene
        //      to comment out or un comment multiple lines select lines and press command + /
        //      you can copy source code for simple shape from the three.js playground here: http://threejsplaygnd.brangerbriz.net/gui/
        //      for more on using 3D models with AR.js and A-Frame see here: https://medium.com/@akashkuttappa/using-3d-models-with-ar-js-and-a-frame-84d462efe498
        //////////////////////////////////////////////////////////////////////////////////
        
        var geometry, material, mesh;
        
        ///////////////////////////////////////////////////////////
        // add a static cube
     
        // end cube code
        ///////////////////////////////////////////////////////////
        
    
        
        ///////////////////////////////////////////////////////////
        //add icosphere test from 3js playground
        geometry = new THREE.IcosahedronGeometry(.3, 0); //edit scale (in this code a scale of 1 = size of target image)
        var material	= new THREE.MeshNormalMaterial(); 
        var mesh	= new THREE.Mesh( geometry, material );
        mesh.position.y	= 0.5 //position y equals how far away from target 
         //instead of adding mesh to the scene right away we add only when the target is detected
        //end icosphere code
        ///////////////////////////////////////////////////////////
        
        
        ///////////////////////////////////////////////////////////
//        // add a taurus with rotation animation
//        geometry = new THREE.TorusKnotGeometry(0.3,0.1,64,16);
//        material = new THREE.MeshNormalMaterial(); 
//        mesh = new THREE.Mesh( geometry, material );
//        mesh.position.y	= 0.5
//        arWorldRoot.add( mesh );
//        onRenderFcts.push(function(){
//            mesh.rotation.x += 0.1
//        })
//        // end taurus code
       ///////////////////////////////////////////////////////////
        
        
       
        
        /////////////////////////////////////////////////////////////
         //add obj model (static)
         // obj texture

         var manager = new THREE.LoadingManager();
         manager.onProgress = function ( item, loaded, total ) {

             console.log( item + ',' + loaded + ',' + total );
             console.log( 'hello' );

         };

        

         // obj model
         var onProgress = function ( xhr ) {
             if ( xhr.lengthComputable ) {
                 var percentComplete = xhr.loaded / xhr.total * 100;
                 console.log( Math.round(percentComplete, 2) + '% downloaded' );
             }
         };

         var onError = function ( xhr ) {
         };

         var loader = new THREE.STLLoader( manager );
         loader.load( './models/fox.stl', function ( object ) {

             object.traverse( function ( child ) {

                 if ( child instanceof THREE.Mesh ) {

                     child.material.map = texture;

                 }

             } );

 			object.position.y = - 95;
 			scene.add( object );
             

         }, onProgress, onError );

         //end obj code
        ////////////////////////////////////////////////////////////
        
        
        
    
</script></body>
</html>